

<WelcomeScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            font_size: root.height/30
            text: ('[b]Welcome to the Rating App! [/b] \nPlease read the instructions carefully before proceeding.')
            markup: True
            size_hint_y: 0.15
        Label:
            text: 'Instructions follow here...'
            size_hint_y: 0.7
        BoxLayout:
            size_hint_y: 0.15
            Button:
                font_size: root.height/40
                font_size: root.height/40
                text: 'Back'
                # This button does nothing for now, just a placeholder
                on_release: app.root.current = 'welcome'
                opacity: .5 # Make invisible as it's just a placeholder
            Button:
                font_size: root.height/40
                font_size: root.height/40
                text: 'Next'
                on_release: app.root.current = 'questionnaire'


<QuestionnaireScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Please enter your information below.'
            font_size: root.height/40
            size_hint_y: 0.10
            height: '48dp'
        BoxLayout:
            size_hint_y: 0.10
            height: '48dp'

            Label:
                font_size: root.height/40
                text: 'Please select your gender'
            ToggleButton:
                font_size: root.height/40
                text: 'M'
                group: "user_gender"
                on_state: root.gender_clicked(self, self.state, "M")
            ToggleButton:
                font_size: root.height/40
                text: 'F'
                group: "user_gender"
                on_state: root.gender_clicked(self, self.state, "F")
            ToggleButton:
                font_size: root.height/40
                text: 'D'
                group: "user_gender"
                on_state: root.gender_clicked(self, self.state, "D")


        TextInput:
            font_size: root.height/30
            hint_text: 'Enter your age'
            size_hint_y: 0.10
            height: '48dp'
            on_text: root.age_input(self, self.text)

        TextInput:
            font_size: root.height/30
            hint_text: 'Erfahrung als Spieler:in (Jahren)'
            input_filter: 'int'
            size_hint_y: 0.10
            height: '48dp'
            on_text: root.player_exp_input(self, self.text)

        TextInput:
            font_size: root.height/30
            hint_text: 'Erfahrung als Trainer:in (Jahren)'
            input_filter: 'int'
            size_hint_y: 0.10
            height: '48dp'
            on_text: root.coach_exp_input(self, self.text)

        TextInput:
            font_size: root.height/30
            hint_text: 'Erfahrung beim Fußball schauen (Jahre)'
            input_filter: 'int'
            size_hint_y: 0.10
            height: '48dp'
            on_text: root.watch_exp_input(self, self.text)

        TextInput:
            font_size: root.height/30
            hint_text: 'Erfahrung als Spieler:in (Jahren)'
            input_filter: 'int'
            size_hint_y: 0.10
            height: '48dp'
            on_text: root.player_exp_input(self, self.text)

        TextInput:
            font_size: root.height/30
            hint_text: 'Erfahrung als Trainer:in (Jahren)'
            input_filter: 'int'
            size_hint_y: 0.10
            height: '48dp'
            on_text: root.coach_exp_input(self, self.text)

        TextInput:
            font_size: root.height/30
            hint_text: 'Erfahrung beim Fußball schauen (Jahre)'
            input_filter: 'int'
            size_hint_y: 0.10
            height: '48dp'
            on_text: root.watch_exp_input(self, self.text)

        BoxLayout:
            size_hint_y: 0.10
            height: '48dp'
            Label:
                font_size: root.height/40
                text: 'Coaching License:'
            ToggleButton:
                font_size: root.height/40
                text: 'None'
                group: "user_license"
                on_state: root.license_clicked(self, self.state, "None")
            ToggleButton:
                font_size: root.height/40
                text: 'B'
                group: "user_license"
                on_state: root.license_clicked(self, self.state, "B")
            ToggleButton:
                font_size: root.height/40
                text: 'A'
                group: "user_license"
                on_state: root.license_clicked(self, self.state, "A")
            ToggleButton:
                font_size: root.height/40
                text: 'Pro'
                group: "user_license"
                on_state: root.license_clicked(self, self.state, "Pro")


        TextInput:
            font_size: root.height/30
            hint_text: "Enter the first two letters of your father's first name"
            size_hint_y: 0.10
            height: '48dp'
            on_text: root.id_input_1(self, self.text)

        TextInput:
            font_size: root.height/30
            hint_text: "Enter the last two letters of your mother's first name"
            size_hint_y: 0.10
            height: '48dp'
            on_text: root.id_input_2(self, self.text)

        TextInput:
            font_size: root.height/30
            hint_text: "Enter the sum of your birthdate (day+month). E.g. 12th of April: 12+4=26"
            size_hint_y: 0.10
            height: '48dp'
            on_text: root.id_input_3(self, self.text)

            on_text: root.id_input_3(self, self.text)

        Label:
            size_hint_y: 0.45
            text: ''

        BoxLayout:
            size_hint_y: 0.15
            Button:
                font_size: root.height/40
                text: 'Back'
                on_release: app.root.current = 'welcome'
            Button:
                font_size: root.height/40
                text: 'Next'
                on_release:
                    app.root.current = 'videoplayer'
                    root.save_user_data()

<ColoredLabel@Label>:
    canvas.before:
        Color:
            rgba: (100/255, 100/255, 100/255,1)
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgba: (0,0,0,1)
        Line:
            rectangle: self.x, self.y, self.width, self.height
            width: .8

<VideoPlayerScreen>:
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: .1
            ColoredLabel:
                id: team_label
                font_size: root.height/40
                text: 'No Team'
                bold: True
            ColoredLabel:
                id: player_label
                font_size: root.height/40
                text: 'No Player'
                bold: True
            ColoredLabel:
                id: type_label
                font_size: root.height/40
                text: 'No Type'
                bold: True
            ColoredLabel:
                id: bodypart_label
                font_size: root.height/40
                text: 'No Bodypart'
                bold: True
        VideoPlayer:
            size_hint_y: .65
            id: video_player
        Label:
            id: info_label
            size_hint_y: .05

        # Abfrage Kreativität
        BoxLayout:
            canvas.before:
                Color:
                    rgba: (100/255, 100/255, 100/255,1)
                Rectangle:
                    pos: self.pos
                    size: self.size
            size_hint_y: .12
            orientation: 'vertical'

            BoxLayout:
                size_hint_y: .4
                Label:
                    font_size: root.height/40
                    size_hint_x: None
                    text: 'Creativity Rating:'
                    width: dp(220)
                    halign: 'left'
                    text_size: self.size

            BoxLayout:
                size_hint_y: .4
                spacing: 6
                ToggleButton:
                    id: r_m3
                    text: '-3'
                    group: 'likert7'
                    on_state: root.set_likert(-3) if self.state == 'down' else None
                ToggleButton:
                    id: r_m2
                    text: '-2'
                    group: 'likert7'
                    on_state: root.set_likert(-2) if self.state == 'down' else None
                ToggleButton:
                    id: r_m1
                    text: '-1'
                    group: 'likert7'
                    on_state: root.set_likert(-1) if self.state == 'down' else None
                ToggleButton:
                    id: r_0
                    text: '0'
                    group: 'likert7'
                    state: 'down'  # Default
                    on_state: root.set_likert(0) if self.state == 'down' else None
                ToggleButton:
                    id: r_p1
                    text: '1'
                    group: 'likert7'
                    on_state: root.set_likert(1) if self.state == 'down' else None
                ToggleButton:
                    id: r_p2
                    text: '2'
                    group: 'likert7'
                    on_state: root.set_likert(2) if self.state == 'down' else None
                ToggleButton:
                    id: r_p3
                    text: '3'
                    group: 'likert7'
                    on_state: root.set_likert(3) if self.state == 'down' else None

            BoxLayout:
                size_hint_y: .2
                Label:
                    text: 'not creative'
                Label:
                    text: ''
                Label:
                    text: ''
                Label:
                    text: 'neutral'
                Label:
                    text: ''
                Label:
                    text: ''
                Label:
                    text: 'very creative'

        # Abfrage technical correctness
        BoxLayout:
            canvas.before:
                Color:
                    rgba: (100/255, 100/255, 100/255,1)
                Rectangle:
                    pos: self.pos
                    size: self.size
            size_hint_y: .12
            orientation: 'vertical'

            BoxLayout:
                size_hint_y: .4
                Label:
                    font_size: root.height/40
                    size_hint_x: None
                    text: 'Technical correctness:'
                    width: dp(220)
                    halign: 'left'
                    text_size: self.size

            BoxLayout:
                size_hint_y: .4
                spacing: 6
                ToggleButton:
                    id: t_m3
                    text: '-3'
                    group: 'likert7_tech'
                    on_state: root.set_likert_tech(-3) if self.state == 'down' else None
                ToggleButton:
                    id: t_m2
                    text: '-2'
                    group: 'likert7_tech'
                    on_state: root.set_likert_tech(-2) if self.state == 'down' else None
                ToggleButton:
                    id: t_m1
                    text: '-1'
                    group: 'likert7_tech'
                    on_state: root.set_likert_tech(-1) if self.state == 'down' else None
                ToggleButton:
                    id: t_0
                    text: '0'
                    group: 'likert7_tech'
                    state: 'down'
                    on_state: root.set_likert_tech(0) if self.state == 'down' else None
                ToggleButton:
                    id: t_p1
                    text: '1'
                    group: 'likert7_tech'
                    on_state: root.set_likert_tech(1) if self.state == 'down' else None
                ToggleButton:
                    id: t_p2
                    text: '2'
                    group: 'likert7_tech'
                    on_state: root.set_likert_tech(2) if self.state == 'down' else None
                ToggleButton:
                    id: t_p3
                    text: '3'
                    group: 'likert7_tech'
                    on_state: root.set_likert_tech(3) if self.state == 'down' else None
            BoxLayout:
                size_hint_y: .2
                Label:
                    text: 'not correct'
                Label:
                    text: ''
                Label:
                    text: ''
                Label:
                    text: 'neutral'
                Label:
                    text: ''
                Label:
                    text: ''
                Label:
                    text: 'correct'

        # Abfrage aesthetic appeal
        BoxLayout:
            canvas.before:
                Color:
                    rgba: (100/255, 100/255, 100/255,1)
                Rectangle:
                    pos: self.pos
                    size: self.size
            size_hint_y: .12
            orientation: 'vertical'

            BoxLayout:
                size_hint_y: .4
                Label:
                    font_size: root.height/40
                    size_hint_x: None
                    text: 'Aesthetic appeal:'
                    width: dp(220)
                    halign: 'left'
                    text_size: self.size

            BoxLayout:
                size_hint_y: .4
                spacing: 6
                ToggleButton:
                    id: a_m3
                    text: '-3'
                    group: 'likert7_aes'
                    on_state: root.set_likert_aesthetic(-3) if self.state == 'down' else None
                ToggleButton:
                    id: a_m2
                    text: '-2'
                    group: 'likert7_aes'
                    on_state: root.set_likert_aesthetic(-2) if self.state == 'down' else None
                ToggleButton:
                    id: a_m1
                    text: '-1'
                    group: 'likert7_aes'
                    on_state: root.set_likert_aesthetic(-1) if self.state == 'down' else None
                ToggleButton:
                    id: a_0
                    text: '0'
                    group: 'likert7_aes'
                    state: 'down'
                    on_state: root.set_likert_aesthetic(0) if self.state == 'down' else None
                ToggleButton:
                    id: a_p1
                    text: '1'
                    group: 'likert7_aes'
                    on_state: root.set_likert_aesthetic(1) if self.state == 'down' else None
                ToggleButton:
                    id: a_p2
                    text: '2'
                    group: 'likert7_aes'
                    on_state: root.set_likert_aesthetic(2) if self.state == 'down' else None
                ToggleButton:
                    id: a_p3
                    text: '3'
                    group: 'likert7_aes'
                    on_state: root.set_likert_aesthetic(3) if self.state == 'down' else None
            BoxLayout:
                size_hint_y: .2
                Label:
                    text: 'not appealing'
                Label:
                    text: ''
                Label:
                    text: ''
                Label:
                    text: 'neutral'
                Label:
                    text: ''
                Label:
                    text: ''
                Label:
                    text: 'very appealing'

        BoxLayout:
            size_hint_y: 0.15
            Button:
                font_size: root.height/40
                size_hint_x: .25
                text: 'Back to User data'
                on_release: app.root.current = 'questionnaire'
            Button:
                font_size: root.height/40
                size_hint_x: .25
                text: 'Previous Action'
                on_release: root.previous_video(self)
            Button:
                id: submit_button
                font_size: root.height/40
                size_hint_x: .5
                text: 'Submit Rating'
                disabled: root.current_rating is None
                opacity: 1 if not self.disabled else .5
                on_release:
                    root.submit_rating()